
jQuery.noConflict();(function($){var methods={displayLoad:function(){$('#syg-loading td').fadeIn(900,0);$('#syg-loading td').html('<img src="'+syg_option.syg_option_plugin_url+'/sliding-youtube-gallery/img/ui/bigLoader.gif" />');},hideLoad:function(){$('#syg-loading td').fadeOut('slow');},initColorPicker:function(id,val,defaultColor){jQuery('#'+id+' div').css('backgroundColor',jQuery(val).val());jQuery('#'+id).ColorPicker({color:defaultColor,onShow:function(colpkr){jQuery(colpkr).fadeIn(500);return false;},onHide:function(colpkr){jQuery(colpkr).fadeOut(500);return false;},onChange:function(hsb,hex,rgb){jQuery('#'+id+' div').css('backgroundColor','#'+hex);val.val('#'+hex);}});return true;},calculateNewWidth:function(){var height=$('#syg_thumbnail_height').val();var new_width=Math.round(height*480/360);$('#syg_thumbnail_width').val(new_width);return true;},calculateNewHeight:function(){var width=$('#syg_thumbnail_width').val();var new_height=Math.round(width*360/480);$('#syg_thumbnail_height').val(new_height);return true;},deleteStyle:function(id){var sure=confirm('Are you sure to delete this style?');if(sure){var request=jQuery.ajax({url:'admin.php',type:'GET',data:{page:'syg-manage-styles',id:id,action:'delete'},dataType:'html',complete:function(){window.location.reload();}});}
return true;},deleteGallery:function(id){var sure=confirm('Are you sure to delete this gallery?');if(sure){var request=jQuery.ajax({url:'admin.php',type:'GET',data:{page:'syg-manage-galleries',id:id,action:'delete'},dataType:'html',complete:function(){window.location.reload();}});}
return true;},cacheGallery:function(id){var sure=confirm('Are you sure to re-cache this gallery?');if(sure){var request=jQuery.ajax({url:'admin.php',type:'GET',data:{page:'syg-manage-galleries',id:id,action:'cache'},dataType:'html',complete:function(){window.location.reload();}});}
return true;},loadingOn:function(){$('#loader').fadeIn(300);},loadingOff:function(){$('#loader').fadeOut(300);},loadingToggle:function(){$('#loader').fadeToggle(300);},loadData:function(data){data=$.parseJSON(JSON.stringify(data));var page=methods.getQParam.call(this,'page');var html;$('tr[id^=syg_row_]').remove();switch(page){case'syg-manage-styles':var table='styles';methods.hideLoad.call(this);$.each(data,function(key,val){html='<tr id="syg_row_'+key+'">';html=html+'<td>';html=html+val.id;html=html+'</td>';html=html+'<td>';html=html+val.styleName;html=html+'</td>';html=html+'<td>';html=html+val.styleDetails;html=html+'</td>';html=html+'<td>';html=html+'<a href="?page=syg-manage-styles&action=edit&id='+val.id+'"><img src="'+syg_option.syg_option_plugin_url+'/sliding-youtube-gallery/img/ui/admin/edit.png" title="edit"/></a>';if($.cookie('syg-role')=='Administrator'||$.cookie('syg-role')=='Editor'){html=html+'<a href="#" onclick="javascript: jQuery.fn.sygadmin(\'deleteStyle\', \''+val.id+'\');"><img src="'+syg_option.syg_option_plugin_url+'/sliding-youtube-gallery/img/ui/admin/delete.png" title="delete"/></a>';}
html=html+'</td>';html=html+'</tr>';$('#galleries_table tr:last-child').after(html);});break;case'syg-manage-galleries':var table='galleries';methods.hideLoad.call(this);$.each(data,function(key,val){html='<tr id="syg_row_'+key+'">';html=html+'<td>';html=html+val.id;html=html+'</td>';html=html+'<td>';html=html+'<img src="'+val.thumbUrl+'" class="user_pic"></img>';html=html+'</td>';html=html+'<td>';html=html+val.galleryName;html=html+'</td>';html=html+'<td>';html=html+val.galleryDetails;html=html+'</td>';html=html+'<td>';html=html+val.galleryType;html=html+'</td>';html=html+'<td class="'+val.cacheExists+'">';if(val.cacheOn==1){html=html+val.cacheExists;}
html=html+'</td>';html=html+'<td>';html=html+'<a href="'+syg_option.syg_option_plugin_url+'/sliding-youtube-gallery/views/preview.php?id='+val.id+'" class="iframe_'+val.id+'"><img src="'+syg_option.syg_option_plugin_url+'/sliding-youtube-gallery/img/ui/admin/preview.png" title="preview gallery"/></a>';html=html+'<a href="?page=syg-manage-galleries&action=edit&id='+val.id+'"><img src="'+syg_option.syg_option_plugin_url+'/sliding-youtube-gallery/img/ui/admin/edit.png" title="edit gallery"/></a>';if($.cookie('syg-role')=='Administrator'||$.cookie('syg-role')=='Editor'){html=html+'<a href="#" onclick="javascript: jQuery.fn.sygadmin(\'deleteGallery\', \''+val.id+'\');"><img src="'+syg_option.syg_option_plugin_url+'/sliding-youtube-gallery/img/ui/admin/delete.png" title="delete gallery"/></a>';}
if(val.cacheOn==1){html=html+'<a href="#" onclick="javascript: jQuery.fn.sygadmin(\'cacheGallery\', \''+val.id+'\');"><img src="'+syg_option.syg_option_plugin_url+'/sliding-youtube-gallery/img/ui/admin/cache.png" title="cache gallery"/></a>';}
html=html+'</td>';html=html+'</tr>';$('#galleries_table tr:last-child').after(html);var dHeight=parseInt(val.sygStyle.thumbHeight)+(parseInt(val.sygStyle.boxPadding)*2);var dWidth=parseInt(val.sygStyle.boxWidth)+(parseInt(val.sygStyle.boxPadding)*2);$('.iframe_'+val.id).fancybox({'padding':30,'width':dWidth,'height':dHeight,'titlePosition':'inside','titleFormat':function(){return'<div id="gallery-title"><h3>'+val.galleryName+'</h3></div>';},'centerOnScroll':true,'onComplete':function(){$('#fancybox-frame').load(function(){$('#fancybox-content').height($(this).contents().find('body').height()+30);});},'type':'iframe'});});break;default:break;return null;}},addPaginationClickEvent:function(table){$('#syg-pagination-'+table+' li').click(function(){methods.displayLoad.call(this);$('#syg-pagination-'+table+' li').attr({'class':'other_page'});$(this).attr({'class':'current_page'});var pageNum=this.id;$.getJSON(syg_option.syg_option_plugin_url+'/sliding-youtube-gallery/engine/data/admin.php?action=query&table='+table+'&page_number='+pageNum+'&syg_option_numrec='+syg_option.syg_option_numrec,function(data){$.loadData(data);});});},initStyleUi:function(){if($('#syg_thumbnail_width').length)$('#syg_thumbnail_width').change($.calculateNewHeight);if($('#syg_thumbnail_height').length)$('#syg_thumbnail_height').change($.calculateNewWidth);methods.initColorPicker.call(this,'thumb_bordercolor_selector',$('#syg_thumbnail_bordercolor'));methods.initColorPicker.call(this,'box_backgroundcolor_selector',$('#syg_box_background'),'#efefef');methods.initColorPicker.call(this,'desc_fontcolor_selector',$('#syg_description_fontcolor'),'#333333');},initGalleryUi:function(){$('input[name=syg_gallery_type]').each(function(){$(this).click(function(){methods.disableInput.call()});});methods.disableInput.call();},initSettingsUi:function(){$('#syg_option_use_fb2').click(function(){if($('#syg_option_use_fb2_url').is(":visible")){$('#syg_option_use_fb2_url').hide();$('#syg_option_use_fb2_desc').hide();}else{$('#syg_option_use_fb2_url').show();$('#syg_option_use_fb2_desc').show();}});methods.initColorPicker.call(this,'paginator_bordercolor_selector',$('#syg_option_paginator_bordercolor'));methods.initColorPicker.call(this,'paginator_bgcolor_selector',$('#syg_option_paginator_bgcolor'),'#efefef');methods.initColorPicker.call(this,'paginator_shadowcolor_selector',$('#syg_option_paginator_shadowcolor'),'#333333');methods.initColorPicker.call(this,'paginator_fontcolor_selector',$('#syg_option_paginator_fontcolor'),'#333333');},updateCache:function(){var modified=methods.getQParam.call(this,'modified');if($.isNumeric(modified)&&syg_option.syg_option_askcache=='1'){var answer=confirm('Your style has been changed. Cached content need to be updated. Update it now?');if(answer){var request=jQuery.ajax({url:'admin.php',type:'GET',data:{page:'syg-manage-styles',id:modified,action:'cache'},dataType:'html',complete:function(){alert('Your server cache has been successfully updated.');}});}}else if(modified=='true'&&syg_option.syg_option_askcache=='1'){var answer=confirm('Your settings has been updated. Cached content need to be updated. Update it now?');if(answer){var request=jQuery.ajax({url:'admin.php',type:'GET',data:{page:'syg-manage-settings',action:'cache'},dataType:'html',complete:function(){alert('Your server cache has been successfully updated.');}});}}},disableInput:function(){var value=$('input[name=syg_gallery_type]:checked').val();switch(value){case'feed':$('#syg_youtube_username_panel').css({opacity:0.0,visibility:"visible"}).animate({opacity:1.0}).css('height','auto');$('#syg_youtube_username').removeAttr('disabled','disabled');$('#syg_youtube_list_panel').css({opacity:1.0,visibility:"hidden"}).animate({opacity:0.0}).css('height','0');$('#syg_youtube_videolist').attr('disabled','disabled');$('#syg_youtube_playlist_panel').css({opacity:1.0,visibility:"hidden"}).animate({opacity:0.0}).css('height','0');$('#syg_youtube_playlist').attr('disabled','disabled');break;case'list':$('#syg_youtube_username_panel').css({opacity:1.0,visibility:"hidden"}).animate({opacity:0.0}).css('height','0');$('#syg_youtube_username').attr('disabled','disabled');$('#syg_youtube_list_panel').css({opacity:0.0,visibility:"visible"}).animate({opacity:1.0}).css('height','auto');$('#syg_youtube_videolist').removeAttr('disabled','disabled');$('#syg_youtube_playlist_panel').css({opacity:1.0,visibility:"hidden"}).animate({opacity:0.0}).css('height','0');$('#syg_youtube_playlist').attr('disabled','disabled');break;case'playlist':$('#syg_youtube_username_panel').css({opacity:1.0,visibility:"hidden"}).animate({opacity:0.0}).css('height','0');$('#syg_youtube_username').attr('disabled','disabled');$('#syg_youtube_list_panel').css({opacity:1.0,visibility:"hidden"}).animate({opacity:0.0}).css('height','0');$('#syg_youtube_videolist').attr('disabled','disabled');$('#syg_youtube_playlist_panel').css({opacity:0.0,visibility:"visible"}).animate({opacity:1.0}).css('height','auto');$('#syg_youtube_playlist').removeAttr('disabled','disabled');break;default:break;}},getQParam:function(name){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(window.location.search);if(results==null){return"";}else{return decodeURIComponent(results[1].replace(/\+/g," "));}}};$.fn.sygadmin=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{$.error('Method '+method+' does not exist on jQuery.sygadmin');}};})(jQuery);jQuery(document).ready(function($){var action=$.fn.sygadmin('getQParam','action');var page=$.fn.sygadmin('getQParam','page');var id=$.fn.sygadmin('getQParam','id');$('#loader').ajaxStart(function(){$(this).fadeIn(300);});$('#loader').ajaxStop(function(){$(this).fadeOut(300);});if(action=='add'||action=='edit'){if(page=='syg-manage-galleries'){$.fn.sygadmin('initGalleryUi');}else if(page=='syg-manage-styles'){$.fn.sygadmin('initStyleUi');}}else{switch(page){case'syg-manage-styles':var table='styles';$.fn.sygadmin('updateCache');break;case'syg-manage-galleries':var table='galleries';break;case'syg-manage-settings':$.fn.sygadmin('initSettingsUi');$.fn.sygadmin('updateCache');return true;default:return false;}
$.fn.sygadmin('displayLoad');if(!id){$.getJSON(syg_option.syg_option_plugin_url+'/sliding-youtube-gallery/engine/data/admin.php?action=query&table='+table+'&page_number=1&syg_option_numrec='+syg_option.syg_option_numrec,function(data){$.fn.sygadmin('loadData',data);});}
$.fn.sygadmin('addPaginationClickEvent',table);}});